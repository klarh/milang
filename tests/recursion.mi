-- Test recursion patterns

-- Factorial
factorial n = if (n == 0) 1 (n * factorial (n - 1))
main1 :~ [console]
main1 = world.io.println (factorial 10)

-- Fibonacci
fib n = if (n < 2) n (fib (n - 1) + fib (n - 2))
main2 :~ [console]
main2 = world.io.println (fib 10)

-- Recursive list operations using built-in at/len/push
-- sum_list: sum all elements
tail xs = xs ->
  [_, ...rest] = rest
  _ = []

sum_list xs = if (len xs == 0) 0 ((at xs 0).val + sum_list (tail xs))
main3 :~ [console]
main3 = world.io.println (sum_list [10, 20, 30, 40])

-- Recursive reverse
reverse_list xs = if (len xs == 0) [] (push (reverse_list (tail xs)) (at xs 0).val)
main4 :~ [console]
main4 = world.io.println (reverse_list [1, 2, 3, 4])
