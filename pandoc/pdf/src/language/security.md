[Header 1 ("security--capabilities", [], []) [Str "Security & Capabilities"], Para [Str "Milang's security model is ", Strong [Str "structural"], Str ": if a function does not receive a", SoftBreak, Str "capability, it physically cannot use it. There is no global mutable state, no", SoftBreak, Str "ambient authority, and no ", Code ("", [], []) "unsafePerformIO", Str " escape hatch."], Header 2 ("capability-based-io", ["unnumbered", "unlisted"], []) [Str "Capability-based IO"], Para [Str "All side effects flow through the ", Code ("", [], []) "world", Str " record that the runtime passes to", SoftBreak, Code ("", [], []) "main", Str ". The record contains sub-records — ", Code ("", [], []) "world.io", Str ", ", Code ("", [], []) "world.process", Str ", etc. —", SoftBreak, Str "each granting access to a specific class of operations."], Para [Str "You restrict a function's power by passing only the sub-record it needs:"], CodeBlock ("", ["milang"], []) "-- greet can print but cannot access the filesystem or exec processes
greet io = io.println \"hello\"

main world = greet world.io
", Para [Str "Because ", Code ("", [], []) "greet", Str " receives ", Code ("", [], []) "world.io", Str " and nothing else, it is structurally", SoftBreak, Str "impossible for it to read files, spawn processes, or access environment", SoftBreak, Str "variables. This is milang's equivalent of the principle of least privilege —", SoftBreak, Str "enforced by the language, not by convention."], Header 2 ("remote-import-pinning", ["unnumbered", "unlisted"], []) [Str "Remote import pinning"], Para [Str "Milang supports importing modules by URL. To prevent supply-chain attacks every", SoftBreak, Str "remote import must be ", Emph [Str "pinned"], Str " to a SHA-256 content hash:"], CodeBlock ("", ["bash"], []) "milang pin file.mi
", Para [Str "This command scans ", Code ("", [], []) "file.mi", Str " for URL imports, fetches each one, computes its", SoftBreak, Str "hash, and records the result. On subsequent compilations the compiler verifies", SoftBreak, Str "that the fetched content matches the pinned hash and refuses to proceed if it", SoftBreak, Str "does not."], Header 2 ("c-ffi-security", ["unnumbered", "unlisted"], []) [Str "C FFI security"], Para [Str "Milang can call C functions via its FFI. Native C code operates outside the", SoftBreak, Str "capability model, so FFI is the one place where the structural guarantee can be", SoftBreak, Str "bypassed. Two CLI flags are described to let you lock this down (note: these flags are not currently implemented in the core compiler):"], BulletList [[Plain [Strong [Code ("", [], []) "--no-ffi"], Str " — disallow all C FFI imports. The program may only use pure", SoftBreak, Str "milang and the built-in ", Code ("", [], []) "world", Str " capabilities."]], [Plain [Strong [Code ("", [], []) "--no-remote-ffi"], Str " — allow C FFI in local ", Code ("", [], []) ".mi", Str " files but forbid it in any", SoftBreak, Str "module imported by URL (and any module transitively imported from that URL", SoftBreak, Str "module). This lets you trust your own native code while sandboxing third-party", SoftBreak, Str "libraries."]]], Para [Str "Trust is transitive: if your local file imports a remote module ", Code ("", [], []) "A", Str ", and ", Code ("", [], []) "A", SoftBreak, Str "imports a relative module ", Code ("", [], []) "B", Str ", then ", Code ("", [], []) "B", Str " is also in the remote trust zone and", SoftBreak, Str "subject to ", Code ("", [], []) "--no-remote-ffi", Str "."], Header 2 ("structural-security-summary", ["unnumbered", "unlisted"], []) [Str "Structural security summary"], Table ("", [], []) (Caption Nothing []) [(AlignDefault, (ColWidth 0.5)), (AlignDefault, (ColWidth 0.5))] (TableHead ("", [], []) [Row ("", [], []) [Cell ("", [], []) AlignDefault (RowSpan 0) (ColSpan 0) [Plain [Str "Layer"]], Cell ("", [], []) AlignDefault (RowSpan 0) (ColSpan 0) [Plain [Str "Mechanism"]]]]) [(TableBody ("", [], []) (RowHeadColumns 0) [] [Row ("", [], []) [Cell ("", [], []) AlignDefault (RowSpan 0) (ColSpan 0) [Plain [Str "Function-level isolation"]], Cell ("", [], []) AlignDefault (RowSpan 0) (ColSpan 0) [Plain [Str "Pass minimal ", Code ("", [], []) "world", Str " sub-records"]]], Row ("", [], []) [Cell ("", [], []) AlignDefault (RowSpan 0) (ColSpan 0) [Plain [Str "Supply-chain integrity"]], Cell ("", [], []) AlignDefault (RowSpan 0) (ColSpan 0) [Plain [Code ("", [], []) "milang pin", Str " + SHA-256 verification"]]], Row ("", [], []) [Cell ("", [], []) AlignDefault (RowSpan 0) (ColSpan 0) [Plain [Str "Native code gating"]], Cell ("", [], []) AlignDefault (RowSpan 0) (ColSpan 0) [Plain [Code ("", [], []) "--no-ffi", Str ", ", Code ("", [], []) "--no-remote-ffi"]]], Row ("", [], []) [Cell ("", [], []) AlignDefault (RowSpan 0) (ColSpan 0) [Plain [Str "Purity tracking"]], Cell ("", [], []) AlignDefault (RowSpan 0) (ColSpan 0) [Plain [Str "Compiler tracks ", Code ("", [], []) "world", Str "-tainted expressions; pure code cannot perform IO"]]]])] (TableFoot ("", [], []) []), Para [Str "The design principle is simple: the only way to perform a side effect is to hold", SoftBreak, Str "the right capability, and capabilities can only travel through explicit function", SoftBreak, Str "arguments. The FFI gating flags close the one remaining loophole by controlling", SoftBreak, Str "access to native C code."]]